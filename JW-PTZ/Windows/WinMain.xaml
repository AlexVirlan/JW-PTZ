<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:wins="clr-namespace:JWPTZ.Windows"
    xmlns:utils="clr-namespace:JWPTZ.Utilities"
    xmlns:controls="clr-namespace:JWPTZ.Controls"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes" x:Class="JWPTZ.Windows.WinMain"
    mc:Ignorable="d"
    Title="JW PTZ - AvA.Soft" Height="690" Width="970" d:Height="690" d:Width="970" Background="#FF1A1A1A" Foreground="White" WindowStartupLocation="CenterScreen"
    ResizeMode="CanMinimize" Loaded="Window_Loaded" Closing="Window_Closing" WindowStyle="None" AllowsTransparency="True" Opacity="1">

    <Window.Resources>
        <utils:SettingsNotifier x:Key="SettingsNotifier"/>
        <controls:ToggleImageConverter x:Key="ToggleImageConverter"/>

        <Style x:Key="BasicRadioStyle" TargetType="{x:Type RadioButton}">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
        </Style>
        <Style x:Key="BasicButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="#FF111111"/>
            <Setter Property="BorderBrush" Value="#FF404040"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
        <Style x:Key="CustomButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="#FF111111"/>
            <Setter Property="BorderBrush" Value="#FF404040"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="1.5"/>
            <Setter Property="Padding" Value="1,1,1,1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Border x:Name="border"
                            Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="6">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" Margin="{TemplateBinding Padding}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#FF404040"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="Gray"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="Gray"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="Gray"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="LightGray"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="Gray"/>
                                <Setter Property="Foreground" Value="Gray"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ImageButtonStyle" TargetType="{x:Type Button}">
            <Setter Property="Background" Value="#FF111111"/>
            <Setter Property="BorderBrush" Value="#FF404040"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="1.7"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="2.6"/>
            <Setter Property="RenderOptions.BitmapScalingMode" Value="HighQuality"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Button}">
                        <Grid>
                            <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"/>
                            <Rectangle x:Name="Overlay" Fill="Transparent" RadiusX="6" RadiusY="6"/>
                            <TextBlock Text="{TemplateBinding Content}"
                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                Foreground="White" FontSize="17" FontWeight="Bold"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Overlay" Property="Fill" Value="#AA404040"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#FFAAAAAA"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="Gray"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="Gray"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ImgBtnBGStyle" TargetType="{x:Type Rectangle}">
            <Setter Property="Fill" Value="#FF111111"/>
            <Setter Property="RadiusX" Value="6"/>
            <Setter Property="RadiusY" Value="6"/>
            <Setter Property="Margin" Value="6"/>
        </Style>
        <Style x:Key="ImgRoundBtnBGStyle" TargetType="{x:Type Rectangle}">
            <Setter Property="Fill" Value="#FF111111"/>
            <Setter Property="RadiusX" Value="26"/>
            <Setter Property="RadiusY" Value="26"/>
            <Setter Property="Margin" Value="6"/>
        </Style>

        <Style x:Key="ToggleButtonStyle" TargetType="controls:ImageToggleButton">
            <Setter Property="Background" Value="#FF111111"/>
            <Setter Property="BorderBrush" Value="#FF404040"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="1.7"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Margin" Value="2.6"/>
            <Setter Property="RenderOptions.BitmapScalingMode" Value="HighQuality"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="controls:ImageToggleButton">
                        <Grid>
                            <Border x:Name="Border"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"/>
                            <Rectangle x:Name="Overlay" Fill="Transparent" RadiusX="6" RadiusY="6"/>
                            <Image x:Name="ToggleButtonImage" Margin="2" Opacity="{TemplateBinding ImageOpacity}">
                                <Image.Source>
                                    <MultiBinding Converter="{StaticResource ToggleImageConverter}">
                                        <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="IsChecked" />
                                        <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="UncheckedImageSource" />
                                        <Binding RelativeSource="{RelativeSource TemplatedParent}" Path="CheckedImageSource" />
                                    </MultiBinding>
                                </Image.Source>
                            </Image>

                            <TextBlock Text="{TemplateBinding Content}"
                                HorizontalAlignment="Center" VerticalAlignment="Center"
                                Foreground="White" FontSize="17" FontWeight="Bold"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="Border" Property="BorderBrush" Value="#FFAAFFAA"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="Overlay" Property="Fill" Value="#AA404040"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="#FFAAAAAA"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="Border" Property="Background" Value="Gray"/>
                                <Setter TargetName="Border" Property="BorderBrush" Value="Gray"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


    </Window.Resources>

    <Border x:Name="brdMain" BorderBrush="#FF404040" BorderThickness="1">
        <DockPanel>
            <DockPanel Background="#FF404040" Height="30" DockPanel.Dock="Top" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Column="0">
                        <!--<Button x:Name="btnMenu" Content="Menu" Width="50" Style="{StaticResource CustomButtonStyle}" Click="btnMenu_Click"/>-->
                        <TextBlock Text="JW PTZ - AvA.Soft" Foreground="White" VerticalAlignment="Center" Margin="10,0,0,0" />
                    </StackPanel>

                    <StackPanel x:Name="lblBarInfo" Orientation="Horizontal" HorizontalAlignment="Center" Grid.Column="1">
                        <TextBlock Text=":)" Foreground="White" VerticalAlignment="Center"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Grid.Column="2">
                        <Button Content="–" Width="30" Style="{StaticResource CustomButtonStyle}" Click="MinimizeButton_Click"/>
                        <Button Content="□" Width="30" Style="{StaticResource CustomButtonStyle}" Click="MaximizeRestoreButton_Click" IsEnabled="False" Opacity="0.26"/>
                        <Button Content="X" Width="30" Style="{StaticResource CustomButtonStyle}" Click="CloseButton_Click"/>
                    </StackPanel>
                </Grid>
            </DockPanel>

            <Grid x:Name="grdRoot" Margin="0,0,0,0">

                <Grid x:Name="grdLogs" HorizontalAlignment="Left" Height="auto" Margin="26,470,0,0" VerticalAlignment="Top" Width="920">
                    <StackPanel Orientation="Vertical">
                        <UniformGrid Rows="1" Columns="7" HorizontalAlignment="Stretch">
                            <Label Content="Logs:" Foreground="White" HorizontalAlignment="Left"/>

                            <CheckBox x:Name="chkAutoScrollUiLogs" Height="20" Width="120" Foreground="White" IsChecked="True" Checked="UpdateUILogsSettings" Unchecked="UpdateUILogsSettings">
                                <TextBlock Text="Auto scroll to end" Margin="0,-2,0,0"/>
                            </CheckBox>

                            <CheckBox x:Name="chkShowTimeStamp" Height="20" Width="116" Foreground="White" IsChecked="True" Checked="UpdateUILogsSettings" Unchecked="UpdateUILogsSettings">
                                <TextBlock Text="Show timestamp" Margin="0,-2,0,0"/>
                            </CheckBox>

                            <CheckBox x:Name="chkIncludeParamsToUiLogs" Height="20" Width="110" Foreground="White" IsChecked="True" Checked="UpdateUILogsSettings" Unchecked="UpdateUILogsSettings">
                                <TextBlock Text="Include params" Margin="0,-2,0,0"/>
                            </CheckBox>

                            <CheckBox x:Name="chkVerboseErrUiLogs" Height="20" Width="108" Foreground="White" IsChecked="True" Checked="UpdateUILogsSettings" Unchecked="UpdateUILogsSettings">
                                <TextBlock Text="Verbose errors" Margin="0,-2,0,0"/>
                            </CheckBox>

                            <CheckBox x:Name="chkShowFullEndpointToUiLogs"  Height="20" Width="126" Foreground="White" IsChecked="False" Checked="UpdateUILogsSettings" Unchecked="UpdateUILogsSettings">
                                <TextBlock Text="Show full endpoint" Margin="0,-2,0,0"/>
                            </CheckBox>

                            <Label x:Name="lblClearUiLogs" Foreground="White" Cursor="Hand" MouseLeftButtonDown="lblClearUiLogs_MouseLeftButtonDown" HorizontalAlignment="Right">
                                <TextBlock TextDecorations="Underline"><Run Text="Clear logs"/></TextBlock>
                            </Label>
                        </UniformGrid>
                        <RichTextBox x:Name="rtbLogs" Foreground="White" SelectionBrush="#FF6B6B6B" BorderBrush="#FF404040" IsReadOnly="True" VerticalScrollBarVisibility="Auto" Height="150" TextChanged="rtbLogs_TextChanged" Style="{x:Null}">
                            <RichTextBox.Background>
                                <SolidColorBrush Color="#FF111111" Opacity="1"/>
                            </RichTextBox.Background>
                            <FlowDocument>
                                <Paragraph>
                                    <Run Text=""/>
                                </Paragraph>
                            </FlowDocument>
                        </RichTextBox>
                    </StackPanel>
                </Grid>

                <Grid x:Name="grdCams" HorizontalAlignment="Left" Height="80" Margin="20,20,0,0" VerticalAlignment="Top" Width="170">
                    <StackPanel Orientation="Vertical">
                        <Grid>
                            <Label Content="Select a camera:" Foreground="LightGray" HorizontalContentAlignment="Center"/>
                        </Grid>
                        <Grid>
                            <ComboBox x:Name="cmbCameras" Height="34" Width="auto" ItemsSource="{Binding Cameras, Source={StaticResource SettingsNotifier}}" SelectedIndex="0" SelectionChanged="cmbCameras_SelectionChanged">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock>
                                            <TextBlock.Text>
                                                <MultiBinding StringFormat="{}{0}. {1}">
                                                    <Binding Path="Id"/>
                                                    <Binding Path="Name"/>
                                                </MultiBinding>
                                            </TextBlock.Text>
                                        </TextBlock>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </Grid>
                        <Grid>
                            <Label x:Name="lblCamInfo" Content="-" Foreground="LightGray" HorizontalContentAlignment="Center"/>
                        </Grid>
                    </StackPanel>

                </Grid>

                <Grid x:Name="grdPTZF" HorizontalAlignment="Left" VerticalAlignment="Top" Height="auto" Width="auto" Margin="20,110,0,0">
                    <StackPanel Orientation="Vertical">
                        <Grid Width="170" Height="170">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Rectangle Grid.Row="0" Grid.Column="0" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="0" Grid.Column="1" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="0" Grid.Column="2" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="1" Grid.Column="0" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="1" Grid.Column="1" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="1" Grid.Column="2" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="2" Grid.Column="0" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="2" Grid.Column="1" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="2" Grid.Column="2" Style="{StaticResource ImgBtnBGStyle}" />

                            <Button x:Name="btnPanLeftTiltUp" Grid.Row="0" Grid.Column="0" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/up-left-arrow-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnTiltUp" Grid.Row="0" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/up-arrow-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnPanRightTiltUp" Grid.Row="0" Grid.Column="2" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/up-right-arrow-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>

                            <Button x:Name="btnPanLeft" Grid.Row="1" Grid.Column="0" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/left-arrow-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnGoHome" Grid.Row="1" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/home2-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnPanRight" Grid.Row="1" Grid.Column="2" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/right-arrow-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>

                            <Button x:Name="btnPanLeftTiltDown" Grid.Row="2" Grid.Column="0" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/down-left-arrow-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnTiltDown" Grid.Row="2" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/down-arrow-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnPanRightTiltDown" Grid.Row="2" Grid.Column="2" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/down-right-arrow-white.png" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                        </Grid>

                        <Grid Width="170" Height="55" Margin="0,6,0,6">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Rectangle Grid.Row="0" Grid.Column="0" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="0" Grid.Column="1" Style="{StaticResource ImgBtnBGStyle}" />

                            <Button x:Name="btnZoomIn" Grid.Row="0" Grid.Column="0" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/zoom-in-white.png" Stretch="Uniform" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnZoomOut" Grid.Row="0" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/zoom-out-white.png" Stretch="Uniform" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                        </Grid>

                        <Grid Width="170" Height="55" Margin="0,0,0,6">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Rectangle Grid.Row="0" Grid.Column="0" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="0" Grid.Column="1" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="0" Grid.Column="2" Style="{StaticResource ImgBtnBGStyle}" />

                            <Button x:Name="btnFocusIn" Grid.Row="0" Grid.Column="0" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/focus-in-white.png" Stretch="Uniform" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnFocusOut" Grid.Row="0" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/focus-out-white.png" Stretch="Uniform" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                            <Button x:Name="btnActivateAutoFocus" Grid.Row="0" Grid.Column="2" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="PTZFOControl_PreviewMouseDownUp" PreviewMouseUp="PTZFOControl_PreviewMouseDownUp">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/focus-auto-white.png" Stretch="Uniform" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>
                        </Grid>

                        <Grid Width="170" Height="55">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Rectangle Grid.Row="0" Grid.Column="0" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="0" Grid.Column="1" Style="{StaticResource ImgBtnBGStyle}" />
                            <Rectangle Grid.Row="0" Grid.Column="2" Style="{StaticResource ImgBtnBGStyle}" />

                            <controls:ImageToggleButton x:Name="itbOSD" Grid.Row="0" Grid.Column="0"
                                IsChecked="False"
                                Style="{StaticResource ToggleButtonStyle}"
                                Content="OSD"
                                UncheckedImageSource="/Resources/Images/empty.png"
                                CheckedImageSource="/Resources/Images/check-white.png"
                                ImageOpacity="0.46" 
                                Checked="itbOSD_CheckedChanged"
                                Unchecked="itbOSD_CheckedChanged"
                                Margin="5"/>


                            <Button x:Name="btnOsdEnter" Grid.Row="0" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="OsdEnterBack_PreviewMouseDown" Opacity="0.26">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/enter-white.png" Stretch="Uniform" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>

                            <Button x:Name="btnOsdBack" Grid.Row="0" Grid.Column="2" Style="{StaticResource ImageButtonStyle}" Margin="5" PreviewMouseDown="OsdEnterBack_PreviewMouseDown" Opacity="0.26">
                                <Button.Background>
                                    <ImageBrush ImageSource="/Resources/Images/back-white.png" Stretch="Uniform" Viewport="0.1,0.1,0.8,0.8" Opacity="0.64"/>
                                </Button.Background>
                            </Button>

                        </Grid>
                    </StackPanel>
                </Grid>

                <TabControl HorizontalAlignment="Left" Height="366" Margin="220,30,0,0" VerticalAlignment="Top" Width="726" BorderThickness="1,1,1,1" BorderBrush="#FFACACAC">
                    <TabItem x:Name="tabPresets" Header="Presets (calling)">
                        <Border BorderBrush="#FF404040" BorderThickness="1,1,1,1">
                            <Grid x:Name="grdPresetsMain">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="auto"/>
                                    <RowDefinition Height="8*"/>
                                    <RowDefinition Height="auto"/>
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Margin="0,0,0,0">
                                    <Label Content="Left click = call preset.   Ctrl + left click = set preset.   Right click = view image.   Middle click = clear image." HorizontalContentAlignment="Center" Foreground="LightGray"/>
                                </Grid>

                                <Grid Margin="10,0,10,0" Grid.Row="1" Grid.Column="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <Button x:Name="btnPreset1" Grid.Row="0" Grid.Column="0" Style="{StaticResource ImageButtonStyle}" Content="1" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset2" Grid.Row="0" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Content="2" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset3" Grid.Row="0" Grid.Column="2" Style="{StaticResource ImageButtonStyle}" Content="3" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset4" Grid.Row="0" Grid.Column="3" Style="{StaticResource ImageButtonStyle}" Content="4" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset5" Grid.Row="0" Grid.Column="4" Style="{StaticResource ImageButtonStyle}" Content="5" PreviewMouseDown="CallPreset_PreviewMouseDown"/>

                                    <Button x:Name="btnPreset6" Grid.Row="1" Grid.Column="0" Style="{StaticResource ImageButtonStyle}" Content="6" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset7" Grid.Row="1" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Content="7" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset8" Grid.Row="1" Grid.Column="2" Style="{StaticResource ImageButtonStyle}" Content="8" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset9" Grid.Row="1" Grid.Column="3" Style="{StaticResource ImageButtonStyle}" Content="9" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset10" Grid.Row="1" Grid.Column="4" Style="{StaticResource ImageButtonStyle}" Content="10" PreviewMouseDown="CallPreset_PreviewMouseDown"/>

                                    <Button x:Name="btnPreset11" Grid.Row="2" Grid.Column="0" Style="{StaticResource ImageButtonStyle}" Content="11" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset12" Grid.Row="2" Grid.Column="1" Style="{StaticResource ImageButtonStyle}" Content="12" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset13" Grid.Row="2" Grid.Column="2" Style="{StaticResource ImageButtonStyle}" Content="13" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset14" Grid.Row="2" Grid.Column="3" Style="{StaticResource ImageButtonStyle}" Content="14" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                    <Button x:Name="btnPreset15" Grid.Row="2" Grid.Column="4" Style="{StaticResource ImageButtonStyle}" Content="15" PreviewMouseDown="CallPreset_PreviewMouseDown"/>
                                </Grid>

                                <Grid Grid.Row="2" Grid.Column="0" Margin="0,5,0,5" HorizontalAlignment="Center">
                                    <StackPanel Orientation="Horizontal">
                                        <CheckBox x:Name="chkTakeSnapshots" Margin="5,0,17,1" IsChecked="True" Checked="chkTakeSnapshots_CheckChanged" Unchecked="chkTakeSnapshots_CheckChanged">
                                            <TextBlock Text="Use snapshots" Margin="0,-2,0,0"/>
                                        </CheckBox>
                                        <Label Content="Set or call other presets (16 - 254):" Margin="10,0,10,0"/>
                                        <materialDesign:NumericUpDown x:Name="numOtherPreset" Margin="5,0,5,0" Minimum="16" Value="16" Maximum="254" MaxWidth="100" BorderThickness="0,0,0,0"/>
                                        <Button x:Name="btnCallOtherPreset" Content="Call" Width="50" Margin="10,0,10,0" Style="{StaticResource CustomButtonStyle}" PreviewMouseDown="btnCallOtherPreset_PreviewMouseDown" MouseEnter="btnCallOtherPreset_MouseEnter"/>
                                    </StackPanel>
                                </Grid>
                            </Grid>
                        </Border>
                    </TabItem>
                    <TabItem Header="Image settings">
                        <Border BorderBrush="#FF404040" BorderThickness="1,1,1,1">
                            <Grid Margin="10"/>
                        </Border>
                    </TabItem>
                </TabControl>

                <Grid x:Name="grdSpeeds" HorizontalAlignment="Left" Height="auto" Margin="220,410,0,0" VerticalAlignment="Top" Width="726">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="0">
                        <Label x:Name="lblPanSpeed" Content="Pan speed (8):" HorizontalAlignment="Center"/>
                        <Slider x:Name="sldPanSpeed" SmallChange="1" Minimum="1" Maximum="24" Value="8" ValueChanged="sldPanSpeed_ValueChanged" Margin="6,0,6,0"/>
                    </StackPanel>

                    <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="1">
                        <Label x:Name="lblTiltSpeed" Content="Tilt speed (8):" HorizontalAlignment="Center"/>
                        <Slider x:Name="sldTiltSpeed" SmallChange="1" Minimum="1" Maximum="20" Value="8" ValueChanged="sldTiltSpeed_ValueChanged" Margin="6,0,6,0"/>
                    </StackPanel>

                    <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="2">
                        <Label x:Name="lblZoomSpeed" Content="Zoom speed (3):" HorizontalAlignment="Center"/>
                        <Slider x:Name="sldZoomSpeed" SmallChange="1" Minimum="1" Maximum="7" Value="3" ValueChanged="sldZoomSpeed_ValueChanged" Margin="6,0,6,0"/>
                    </StackPanel>

                    <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="3">
                        <Label x:Name="lblFocusSpeed" Content="Focus speed (3):" HorizontalAlignment="Center"/>
                        <Slider x:Name="sldFocusSpeed" SmallChange="1" Minimum="1" Maximum="7" Value="3" ValueChanged="sldFocusSpeed_ValueChanged" Margin="6,0,6,0"/>
                    </StackPanel>
                </Grid>

                <materialDesign:PopupBox x:Name="puMenu" StaysOpen="True" PopupUniformCornerRadius="10" Cursor="Hand" PlacementMode="LeftAndAlignTopEdges" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Width="50" Height="50" Margin="906,12,0,0" VerticalAlignment="Top">
                    <materialDesign:PopupBox.ToggleContent>
                        <materialDesign:PackIcon Kind="MenuOpen" Foreground="White" Height="46" Width="46"/>
                    </materialDesign:PopupBox.ToggleContent>
                    <StackPanel Orientation="Vertical">
                        <CheckBox x:Name="chkShowUILogs" Content="Show logs" IsChecked="True" Style="{StaticResource MaterialDesignFilterChipPrimaryOutlineCheckBox}" Margin="6" Checked="ToggleUILogs" Unchecked="ToggleUILogs" HorizontalAlignment="Center"/>

                        <StackPanel Orientation="Vertical" Grid.Row="0" Grid.Column="1">
                            <Label x:Name="lblOpacity" Content="Opacity (100%):" HorizontalAlignment="Center"/>
                            <Slider x:Name="sldOpacity" Minimum="0.2" Maximum="1" Value="1" ValueChanged="sldOpacity_ValueChanged" Margin="6,0,6,0" TickFrequency="0.05" SmallChange="0.05" LargeChange="0.05" IsSnapToTickEnabled="True"/>
                        </StackPanel>

                        <Separator/>

                        <Button x:Name="btnFullPresets" Content="Full presets window" PreviewMouseDown="btnFullPresets_PreviewMouseDown" HorizontalContentAlignment="Center"/>
                        
                        <Button x:Name="btnSettings" Content="Settings" PreviewMouseDown="btnSettings_Click" HorizontalContentAlignment="Center"/>

                        <materialDesign:PopupBox x:Name="puTools" PlacementMode="LeftAndAlignTopEdges" StaysOpen="False" MouseEnter="puTools_MouseEnter" PopupHorizontalOffset="1"> <!--MouseLeave="puTools_MouseLeave"-->

                            <materialDesign:PopupBox.ToggleContent>
                                <Button x:Name="btnTools" Content="Tools" HorizontalAlignment="Center" HorizontalContentAlignment="Center" Width="150"  PreviewMouseDown="btnTools_PreviewMouseDown" Cursor="Arrow" MouseLeave="btnTools_MouseLeave"/>
                            </materialDesign:PopupBox.ToggleContent>

                            <StackPanel x:Name="puToolsStackPanel" Orientation="Vertical" MouseLeave="puToolsPanel_MouseLeave">
                                <Button x:Name="btnSyncTool" Content="Network sync" HorizontalContentAlignment="Center"/>
                                <Button x:Name="btnUpdateTool" Content="Update" HorizontalContentAlignment="Center"/>
                                <Button x:Name="btnAboutTool" Content="About" HorizontalContentAlignment="Center"/>
                            </StackPanel>
                            
                        </materialDesign:PopupBox>

                        <Button x:Name="btnResetPtzfSpeeds" Content="Reset PTZF speeds" PreviewMouseDown="btnResetPtzfSpeeds_PreviewMouseDown" HorizontalContentAlignment="Center"/>

                        <Separator/>

                        <Button x:Name="btnExit" Content="Exit" PreviewMouseDown="btnExit_PreviewMouseDown" HorizontalContentAlignment="Center"/>
                    </StackPanel>
                </materialDesign:PopupBox>

            </Grid>
        </DockPanel>
    </Border>

</Window>